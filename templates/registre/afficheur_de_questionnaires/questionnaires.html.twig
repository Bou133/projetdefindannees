{% extends 'base.html.twig' %}

{% block title %}Afficheur_de_Commentaires{% endblock %}


{% block body %}
<style>
   body {background-image:url('PROJET_CDA/images_background/black.jpg')  ; font-size: xx-small ; background-repeat: repeat-y repeat-x ; font-family:'Poppins', sans-serif ; font-style: normal; color: rgb(13, 13, 14);}
   </style>
 <div class="container"  style=" position:absolute ; height:5%; ">
        <div class ="row" style="height: 100%;">


            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="   height:100%  ; " >
        
                <div class = "row"  style="height: 100%;">
                    <div  class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style=" background-color: rgb(3, 3, 3) ; height:100%  ; "  >
                        <div class= "col-lg-10 col-md-10 col-sm-10 col-xs-10  col-lg-offset-1 col-md-offset-1 col-sm-offset-1 col-xs-offset-1 " style="height:100% ;font-size: xx-small " >
                            <div class="row" style="height:100% ;" >
                                <div   style="height:100%  ; width: 100% " >
                                    <nav  style="height:100% ; top:10% ; font-size: xx-small  ;background-color: black;  "  class="row">
                                        <ul class="col-lg-12 col-md-12 col-sm-12 col-xs-12"  style= " background-color: orange ;   font-size: xx-small ; list-style-type: none; top:10% ; height:80% ;" >
                                        <li class="col-lg-2 col-md-2 col-sm-12 col-xs-12" class="dropdown"  > <a href="#"  style=" border: black , solid , 3px;  margin: 5px ; background-color:orange ; color: black; left:0% ; font-size: 80%   ;   " data-toggle="dropdown"  >promotions<i class="fa fa-sort-desc" aria-hidden="true"></i>
                                        </a>
                                            <ul class="dropdown-menu">
                                            <li><a href="#">nouveautés<i class="fa fa-shopping-bag" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">réductions<i class="fa fa-percent" aria-hidden="true"></i>
                                            </a></li>
                                           
                                            </ul>
                                           </li>
                                        <li class=" col-lg-2 col-md-2 col-sm-12 col-xs-12"  class="dropdown"    > <a href="#"  style=" border: black , solid , 3px;   margin: 5px ; background-color:orange ; color: black; left:0%  ;  font-size: 80% ; " data-toggle="dropdown" >blog<i class="fa fa-sort-desc" aria-hidden="true"></i>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a href="#">Commentaires<i class="fa fa-comments" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">questionnaire<i class="fa fa-question-circle" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">statistiques<i class="fa fa-bar-chart" aria-hidden="true"></i>
                                            </a></li>
                                            </ul>
                                           </li> </li>
                                        <li class=" col-lg-2 col-md-2 col-sm-12 col-xs-12"  class="dropdown"    > <a href="#"  style=" border: black , solid , 3px; margin: 5px ; background-color:orange ; color: black; left:0%  ; font-size: 80% ;  " data-toggle="dropdown" >Catégories<i class="fa fa-sort-desc" aria-hidden="true"></i>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a href="#">Hommes<i class="fa fa-male" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">Femmes<i class="fa fa-female" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">Enfants<i class="fa fa-child" aria-hidden="true"></i>
                                            </a></li>
                                            </ul>
                                           </li> </li>
                                        <li class="col-lg-2 col-md-2 col-sm-12 col-xs-12"   class="dropdown"   > <a href="#"  style=" border: black , solid , 3px;  margin: 5px ; background-color:orange ; color: black; left:0%  ;  font-size: 80% ; " data-toggle="dropdown" > commandes<i class="fa fa-sort-desc" aria-hidden="true"></i>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a href="#">panier<i class="fa fa-shopping-basket" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">règlement<i class="fa fa-registered" aria-hidden="true"></i>
                                            </a></li>
                                           
                                            </ul>
                                           </li> </li>
                                        <li class="col-lg-2 col-md-2 col-sm-12 col-xs-12"  class="dropdown"    > <a href="#"  style=" border: black , solid , 3px; margin: 5px ; background-color:orange ; color: black; left:0%  ; font-size: 80%;   " data-toggle="dropdown" >connexion<i class="fa fa-sort-desc" aria-hidden="true"></i>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a href="#">inscription<i class="fa fa-user" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">connexion<i class="fa fa-connectdevelop" aria-hidden="true"></i>
                                            </a></li>
                                            <li><a href="#">compte<i class="fa fa-address-book-o" aria-hidden="true"></i>
                                            </a></li>
                                            </ul>
                                           </li> </li>
                                        <li class=" col-lg-2 col-md-2 col-sm-12 col-xs-12"   class="dropdown"    > <a href="#"  style=" border: black , solid , 3px; margin: 5px ; background-color:orange ; color: black; left:0%  ; font-size: 80% ;  " data-toggle="dropdown" >registre<i class="fa fa-sort-desc" aria-hidden="true"></i>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a href="#">historique d'achats<i class="fa fa-calendar" aria-hidden="true"></i>
                                            </a></li>
                                           
                                            </ul>
                                           </li>  </li>
                                        </ul>
                                    </nav>  
                                </div>
                            </div>
                        </div>
                    </div> 
                </div>
            </div>    
               
    
    
    
    
    
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="   height:100%  ; " >
              
        
               <div class = "row"  style="height: 100%;">
               
                    <div  class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style=" background-color: rgb(186, 248, 16) ; height:100%  ; "  >
                        <a href="#" style="font-size: medium; display: flex; justify-content:center ; "    > ACCUEIL </a>
                    </div> 
                    <div  class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style=" background-color: rgb(3, 3, 3) ; height:100%  ; "  ></div> 
               </div>
           
    
            </div>

   
        
      
        </div>
    </div>


                        <div class="container"  style=" position:absolute; top:5% ; height:75%; ">
                            <div class="row"  style="height:55%; " >
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"  style="height:100%; "  >
                                    <div class="row"  style="height:90%; " >
                                        <div class="col-lg-offset-2 col-md-offset-2 col-sm-offset-2 col-xs-offset-2 col-lg-8 col-md-8 col-sm-8 col-xs-8 "  style="height:100%;  top:0% ; "  >
                                            <div class="row"  style="height:100%; " >
                                             
                                                <div class="col-lg-offset-1 col-md-offset-1 col-sm-offset-1 col-xs-offset-1 col-lg-10 col-md-10 col-sm-10 col-xs-10 "  style="height:100%; background-image:url(images_background/yellow.jpg) ; top:0% ; "  >
                                                    <canvas id="canvas" width="200" height="150"  style=" background-color: #000000; border: 1px solid #000000; width: 200px; height: 150px; margin: 0 auto; display: block; " > </canvas>
                                                      <script >
        let canvas = document.getElementById("canvas");

let context = canvas.getContext("2d");

let paddles = {
    left: {
        x: 7.5,
        y: 25,
        width: 2.5,
        height: 25,
        color: "white",
        score: 0,
        },
    right: {
        x: 190,
        y: 25,
        width: 2.5,
        height: 25,
        color: "white",
        score: 0,
        },
    }; 

let ball = {
    x: 100,
    y: 75,
    radius: 2.5,
    color: "white",
    velocityX: 0.75,
    velocityY: 0.75,
    hitCount: 0,
};

const KEYSTATE = {
    W: false,
    S: false,
    Up: false,
    Down: false
  };

  function playSoundWhenBallHits() {
    // Jouer un son lorsque la balle touche une raquette
    let sound = new Audio("pong.wav");
    sound.play();
  }
    

  function updateBallPosition() {
    // Mettre à jour la position de la balle, détecter les collisions et gérer les rebonds

    ball.x += ball.velocityX;
    ball.y += ball.velocityY;


    if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
        ball.velocityY = -ball.velocityY;
        playSoundWhenBallHits();
    } else if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
        ball.velocityX = -ball.velocityX;
        playSoundWhenBallHits();

        if (ball.x + ball.radius > canvas.width) {
            paddles.left.score++;
        } else {
            paddles.right.score++;
        }

        resetBallPosition();

    }

    if (ball.x - ball.radius < paddles.left.x + paddles.left.width && ball.y - ball.radius < paddles.left.y + paddles.left.height && ball.y + ball.radius > paddles.left.y) {
        ball.velocityX = -ball.velocityX;
        playSoundWhenBallHits();

    }
    if (ball.x + ball.radius > paddles.right.x && ball.y - ball.radius < paddles.right.y + paddles.right.height && ball.y + ball.radius > paddles.right.y) {
        ball.velocityX = -ball.velocityX;
        playSoundWhenBallHits();

    }

    // check if ball is out of bounds
    if (ball.x + ball.radius > canvas.width) {
        resetBallPosition();
    } else if (ball.x - ball.radius < 0) {
        resetBallPosition();
    }
  }

function updateBallVelocity() {
    // Ajouter 1 a hitCount si la balle touche une raquette
    if (ball.x - ball.radius < paddles.left.x + paddles.left.width && ball.y - ball.radius < paddles.left.y + paddles.left.height && ball.y + ball.radius > paddles.left.y) {
        ball.hitCount++;
    }
    if (ball.x + ball.radius > paddles.right.x && ball.y - ball.radius < paddles.right.y + paddles.right.height && ball.y + ball.radius > paddles.right.y) {    
        ball.hitCount++;
    }

    // Mettre à jour la vitesse de la balle en fonction du nombre de rebonds
    if (ball.hitCount > 1) {
        ball.velocityX += 0.125;
        ball.velocityY += 0.125;
        ball.hitCount = 0;
    }
}
  
function updatePaddlePositions() {
    // Mettre à jour la position des raquettes en fonction des entrées de l'utilisateur (touches du clavier)
    
    if (KEYSTATE.W && paddles.left.y > 0) {
        paddles.left.y -= 2.5;
        }
    if (KEYSTATE.S && paddles.left.y < canvas.height - paddles.left.height) {
        paddles.left.y += 2.5;
        }
    if (KEYSTATE.Up && paddles.right.y > 0) {
        paddles.right.y -= 2.5;
        }
    if (KEYSTATE.Down && paddles.right.y < canvas.height - paddles.right.height) {
        paddles.right.y += 2.5;
        }
}
  
function drawBall() {
    // Dessiner la balle sur le canvas en utilisant les méthodes de dessin du contexte 2D
    context.beginPath();
    context.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    context.fillStyle = ball.color;
    context.fill();
    context.closePath();

  }
  
function drawPaddles() {
    // Dessiner les raquettes sur le canvas en utilisant les méthodes de dessin du contexte 2D
    context.fillStyle = paddles.left.color;
    context.fillRect(paddles.left.x, paddles.left.y, paddles.left.width, paddles.left.height);
    context.fillStyle = paddles.right.color;
    context.fillRect(paddles.right.x, paddles.right.y, paddles.right.width, paddles.right.height);

}

function drawScore() {
    context.font = "30px Arial";
    context.fillText(paddles.left.score, 2.5, 12.5);
    context.fillText(paddles.right.score, 195, 12.5);
}

function drawSeparation() {
    context.beginPath();
    context.setLineDash([2.5, 2.5]);
    context.moveTo(100, 0);
    context.lineTo(100, 600);
    context.strokeStyle = "white";
    context.stroke();
    context.closePath();
}

function resetBallPosition() {
    ball.x = canvas.width / 2;
    ball.y = canvas.height / 2;
    ball.hitCount = 0;
    ball.velocityX = 3 * (Math.random() * 2 - 0.25);
    ball.velocityY = 3 * (Math.random() * 2 - 0.25);
}
  
function gameLoop() {
    // Effacer le canvas pour le préparer au nouveau rendu
    context.clearRect(0, 0, canvas.width, canvas.height);
  
    // Mettre à jour la position de la balle et des raquettes
    updateBallPosition();
    updatePaddlePositions();
    updateBallVelocity();
  
    // Dessiner la balle et les raquettes et le score sur le canvas
    drawBall();
    drawPaddles();
    drawSeparation();
    drawScore();
  
    // Demander à `requestAnimationFrame()` de rappeler `gameLoop()` à la prochaine image
    requestAnimationFrame(gameLoop);
}

function onKeyDown(event) {
    // Gérer l'appui sur les touches (par exemple, mettre à jour une variable indiquant que la touche est enfoncée)
    if (event.code === 'KeyW') {
        KEYSTATE.W = true;
      } else if (event.code === 'KeyS') {
        KEYSTATE.S = true;
      } else if (event.code === 'ArrowUp') {
        KEYSTATE.Up = true;
      } else if (event.code === 'ArrowDown') {
        KEYSTATE.Down = true;
      }
}
  
function onKeyUp(event) {
    // Gérer le relâchement des touches (par exemple, mettre à jour une variable indiquant que la touche est relâchée)
    if (event.code === 'KeyW') {
        KEYSTATE.W = false;
      } else if (event.code === 'KeyS') {
        KEYSTATE.S = false;
      } else if (event.code === 'ArrowUp') {
        KEYSTATE.Up = false;
      } else if (event.code === 'ArrowDown') {
        KEYSTATE.Down = false;
      }
}
  
// Ajouter les écouteurs d'événements pour les événements "keydown" et "keyup"
window.addEventListener('keydown', onKeyDown);
window.addEventListener('keyup', onKeyUp);
  
// Démarrer la boucle de jeu
gameLoop();
  

        
        </script>
                                                </div>
                                                </div>  
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row"  style="height:20%; " >
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"  style="height:100%;  "  >
                                    <div class="row" style="height:100% ;">
                                    <div class="col-lg-offset-1 col-md-offset-1 col-sm-offset-1 col-xs-offset-1 col-lg-10 col-md-10 col-sm-10 col-xs-10 "  style="height:90%; background-image:url(images_background/yellow.jpg) "  ></div>
                                   </div>
                                </div>
                            </div>
                            <div class="row"  style="height:30%; " >
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"  style="height:100%; background-image:url(images_background/yellow.jpg) "  ></div>
                            </div>
                        </div>
    
    
    
    
    
                        <footer  class = "container"   style=" position: absolute ; top:75% ; height:35% ; background-image: url(images_background/yellow.jpg) ; background-repeat: repeat-y ; background-repeat: repeat-x; "  >

                            <div class="row"  style="height:100%" >
                                <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5"  style="height:80%   ; " > 
                                     <div class="row" style="height: 80%;">
                                    <div  class="col-lg-11 col-md-11 col-sm-11 col-xs-11" style="  font-size: xx-small; "  >
                                       <ul  style="list-style-type: none ;" >
                                        <li><a href="#"  style=" background-color: rgb(13, 13, 14)  ; ">aide<i class="fa fa-yelp" aria-hidden="true"></i>
                                        </a></li>
                                        <li><a href="#" style=" background-color: rgb(14, 14, 15)  ;"  >suivre votre commande <i class="fa fa-shopping-basket" aria-hidden="true"></i>
                                        </a></li>
                                        <li><a href="#" style=" background-color: rgb(12, 12, 14)  ;" >annuler votre commande <i class="fa fa-shopping-basket" aria-hidden="true"></i> </a></li>
                                    
                                 
                                      
                                        <li> <a href="#"   style=" background-color: rgb(5, 5, 5)  ;" >condition génerales <i class="fa fa-book" aria-hidden="true"></i>
                                        </a></li>
                                        <li><a href="#"   style=" background-color: rgb(10, 10, 10)  ;" >localisation <i class="fa fa-map-marker" aria-hidden="true"></i>
                                        </a></li>
                                       
                                  
                                        <li> <a href="#" style=" background-color: rgb(12, 11, 11)"  >adresse émail <i class="fa fa-envelope" aria-hidden="true"></i></a></li>
                                       <li><a href="#" style=" background-color: rgb(10, 8, 9)"  >adresse instagram <i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                                        <li><a href="#" style=" background-color: rgb(10, 10, 10)"  >adresse facebook <i class="fa fa-facebook-official" aria-hidden="true"></i></a></li>
                                            <li><a href="#" style=" background-color: rgb(15, 14, 15)"   >numéro de téléphone <i class="fa fa-phone" aria-hidden="true"></i></a></li>
                                            </ul>
                                    </div>
                                    </div>
                                </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6"  style="height:90% ; top:10% ;"  >
                                <div class="row"  style="height:90% ; font-size: xx-small;" >
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(190, 184, 245)  ; color: black; "  >Bénin  <img src="images_background/drapeau-benin.jpg"  width="20px" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(245, 246, 248)  ; color: black;"  >Burkina-Faso  <img src="images_background/1200px-Flag_of_Burkina_Faso.svg.png"  width="20%" height="20%">  </div>
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(171, 172, 169)  ; color: black;"  >Centrafique  <img src="images_background/drapeau de la centrafrique.jpg"  width="20%" height="20%"></div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(253, 252, 252)  ; color: black;"  >Comores   <img src="images_background/1014360-Drapeau_des_Comores.jpg"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(150, 146, 146)  ; color: black;"  >Congo   <img src="images_background/1200px-Flag_of_the_Democratic_Republic_of_the_Congo.svg.png"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(255, 255, 254)  ; color: black; "  >Cote d'ivoire   <img src="images_background/1200px-Flag_of_Côte_d'Ivoire.svg.png"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(190, 184, 245)  ; color: black;"  >Gabon    <img src="images_background/1009494-Drapeau_du_Gabon.jpg"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(247, 248, 250)  ; color: black;"  >Guinée    <img src="images_background/drapeau-guinee-conakry.png"  width="20%" height="20%"> </div>
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(175, 175, 173)  ; color: black;"  >Guinée Bissau    <img src="images_background/1009503-Drapeau_de_la_Guinée-Bissau.jpg"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(156, 156, 156)  ; color: black;"  >Guinée équatoriale    <img src="images_background/1009504-Drapeau_de_la_Guinée_équatoriale.jpg"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(248, 238, 238)  ; color: black;"  >Mali     <img src="images_background/1200px-Flag_of_Mali.svg.png"  width="20%" height="20%"></div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(255, 254, 245)  ; color: black; "  >Mauritanie    <img src="images_background/_98966769_f98ea54c-02b5-4383-ab66-34b8d242d3eb.jpg.webp"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(190, 184, 245)  ; color: black; "  >Niger       <img src="images_background/2389px-Flag_of_Niger.svg.png"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(246, 248, 252)  ; color: black; "  >Sénégal     <img src="images_background/2560px-Flag_of_Senegal.svg.png"  width="20%" height="20%"> </div>
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(172, 172, 172)  ; color: black;"  >Tchad     <img src="images_background/langfr-225px-Flag_of_Chad.svg.png"  width="20%" height="20%"> </div> 
                            <div  class="col-lg-3 col-md-3 col-sm-3 col-xs-3" style=" background-color: rgb(218, 212, 213)  ; color: black;"  >Togo    <img src="images_background/1009608-Drapeau_du_Togo.jpg"  width="20%" height="20%"> </div> 
                            </div>
                            <div class="row"  style="height:10%" >
                                </div>
                            </div>
                            
                    
                    
                            
                        </div>
                        </footer> 

                           <script src="PROJET_CDA/pong.js"></script>
                         <script src="PROJET_CDA/pong.js">
        let canvas = document.getElementById("canvas");

let context = canvas.getContext("2d");

let paddles = {
    left: {
        x: 7.5,
        y: 25,
        width: 2.5,
        height: 25,
        color: "white",
        score: 0,
        },
    right: {
        x: 190,
        y: 25,
        width: 2.5,
        height: 25,
        color: "white",
        score: 0,
        },
    }; 

let ball = {
    x: 100,
    y: 75,
    radius: 2.5,
    color: "white",
    velocityX: 0.75,
    velocityY: 0.75,
    hitCount: 0,
};

const KEYSTATE = {
    W: false,
    S: false,
    Up: false,
    Down: false
  };

  function playSoundWhenBallHits() {
    // Jouer un son lorsque la balle touche une raquette
    let sound = new Audio("pong.wav");
    sound.play();
  }
    

  function updateBallPosition() {
    // Mettre à jour la position de la balle, détecter les collisions et gérer les rebonds

    ball.x += ball.velocityX;
    ball.y += ball.velocityY;


    if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
        ball.velocityY = -ball.velocityY;
        playSoundWhenBallHits();
    } else if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
        ball.velocityX = -ball.velocityX;
        playSoundWhenBallHits();

        if (ball.x + ball.radius > canvas.width) {
            paddles.left.score++;
        } else {
            paddles.right.score++;
        }

        resetBallPosition();

    }

    if (ball.x - ball.radius < paddles.left.x + paddles.left.width && ball.y - ball.radius < paddles.left.y + paddles.left.height && ball.y + ball.radius > paddles.left.y) {
        ball.velocityX = -ball.velocityX;
        playSoundWhenBallHits();

    }
    if (ball.x + ball.radius > paddles.right.x && ball.y - ball.radius < paddles.right.y + paddles.right.height && ball.y + ball.radius > paddles.right.y) {
        ball.velocityX = -ball.velocityX;
        playSoundWhenBallHits();

    }

    // check if ball is out of bounds
    if (ball.x + ball.radius > canvas.width) {
        resetBallPosition();
    } else if (ball.x - ball.radius < 0) {
        resetBallPosition();
    }
  }

function updateBallVelocity() {
    // Ajouter 1 a hitCount si la balle touche une raquette
    if (ball.x - ball.radius < paddles.left.x + paddles.left.width && ball.y - ball.radius < paddles.left.y + paddles.left.height && ball.y + ball.radius > paddles.left.y) {
        ball.hitCount++;
    }
    if (ball.x + ball.radius > paddles.right.x && ball.y - ball.radius < paddles.right.y + paddles.right.height && ball.y + ball.radius > paddles.right.y) {    
        ball.hitCount++;
    }

    // Mettre à jour la vitesse de la balle en fonction du nombre de rebonds
    if (ball.hitCount > 1) {
        ball.velocityX += 0.125;
        ball.velocityY += 0.125;
        ball.hitCount = 0;
    }
}
  
function updatePaddlePositions() {
    // Mettre à jour la position des raquettes en fonction des entrées de l'utilisateur (touches du clavier)
    
    if (KEYSTATE.W && paddles.left.y > 0) {
        paddles.left.y -= 2.5;
        }
    if (KEYSTATE.S && paddles.left.y < canvas.height - paddles.left.height) {
        paddles.left.y += 2.5;
        }
    if (KEYSTATE.Up && paddles.right.y > 0) {
        paddles.right.y -= 2.5;
        }
    if (KEYSTATE.Down && paddles.right.y < canvas.height - paddles.right.height) {
        paddles.right.y += 2.5;
        }
}
  
function drawBall() {
    // Dessiner la balle sur le canvas en utilisant les méthodes de dessin du contexte 2D
    context.beginPath();
    context.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
    context.fillStyle = ball.color;
    context.fill();
    context.closePath();

  }
  
function drawPaddles() {
    // Dessiner les raquettes sur le canvas en utilisant les méthodes de dessin du contexte 2D
    context.fillStyle = paddles.left.color;
    context.fillRect(paddles.left.x, paddles.left.y, paddles.left.width, paddles.left.height);
    context.fillStyle = paddles.right.color;
    context.fillRect(paddles.right.x, paddles.right.y, paddles.right.width, paddles.right.height);

}

function drawScore() {
    context.font = "30px Arial";
    context.fillText(paddles.left.score, 2.5, 12.5);
    context.fillText(paddles.right.score, 195, 12.5);
}

function drawSeparation() {
    context.beginPath();
    context.setLineDash([2.5, 2.5]);
    context.moveTo(100, 0);
    context.lineTo(100, 600);
    context.strokeStyle = "white";
    context.stroke();
    context.closePath();
}

function resetBallPosition() {
    ball.x = canvas.width / 2;
    ball.y = canvas.height / 2;
    ball.hitCount = 0;
    ball.velocityX = 3 * (Math.random() * 2 - 0.25);
    ball.velocityY = 3 * (Math.random() * 2 - 0.25);
}
  
function gameLoop() {
    // Effacer le canvas pour le préparer au nouveau rendu
    context.clearRect(0, 0, canvas.width, canvas.height);
  
    // Mettre à jour la position de la balle et des raquettes
    updateBallPosition();
    updatePaddlePositions();
    updateBallVelocity();
  
    // Dessiner la balle et les raquettes et le score sur le canvas
    drawBall();
    drawPaddles();
    drawSeparation();
    drawScore();
  
    // Demander à `requestAnimationFrame()` de rappeler `gameLoop()` à la prochaine image
    requestAnimationFrame(gameLoop);
}

function onKeyDown(event) {
    // Gérer l'appui sur les touches (par exemple, mettre à jour une variable indiquant que la touche est enfoncée)
    if (event.code === 'KeyW') {
        KEYSTATE.W = true;
      } else if (event.code === 'KeyS') {
        KEYSTATE.S = true;
      } else if (event.code === 'ArrowUp') {
        KEYSTATE.Up = true;
      } else if (event.code === 'ArrowDown') {
        KEYSTATE.Down = true;
      }
}
  
function onKeyUp(event) {
    // Gérer le relâchement des touches (par exemple, mettre à jour une variable indiquant que la touche est relâchée)
    if (event.code === 'KeyW') {
        KEYSTATE.W = false;
      } else if (event.code === 'KeyS') {
        KEYSTATE.S = false;
      } else if (event.code === 'ArrowUp') {
        KEYSTATE.Up = false;
      } else if (event.code === 'ArrowDown') {
        KEYSTATE.Down = false;
      }
}
  
// Ajouter les écouteurs d'événements pour les événements "keydown" et "keyup"
window.addEventListener('keydown', onKeyDown);
window.addEventListener('keyup', onKeyUp);
  
// Démarrer la boucle de jeu
gameLoop();
  

        
        </script>
            
                    



{% endblock %}
